<app-user></app-user>
<!-- TABS -->
<div class="container" data-sr="" data-sr-duration="1000" data-sr-distance="20"
    style="visibility: visible; opacity: 1; transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transition: opacity 1s cubic-bezier(0.5, 0, 0, 1) 0s, transform 1s cubic-bezier(0.5, 0, 0, 1) 0s;">
    <ul class="mpl-user-navigation mpl-carousel" data-gap="0" data-slides="auto">
        <div
            class="swiper-container swiper-container-initialized swiper-container-horizontal swiper-container-pointer-events">
            <div class="swiper-wrapper" id="swiper-wrapper-6b310a6364dd3e127" aria-live="polite">
                <div class="swiper-slide swiper-slide-next" role="group" aria-label="2 / 6">
                    <li>
                        <a routerLink="/profile"> Profile </a>
                    </li>
                </div>
                <div class="swiper-slide" role="group" aria-label="4 / 6">
                    <li>
                        <a routerLink="/settings"> Settings </a>
                    </li>
                </div>
                <div class="swiper-slide" role="group" aria-label="5 / 6">
                    <li>
                        <a routerLink="/inventory"> Inventory </a>
                    </li>
                </div>
                <div class="swiper-slide" role="group" aria-label="5 / 6">
                    <li class="active">
                        <a routerLink="/orders"> Orders </a>
                    </li>
                </div>

                <!-- <div class="swiper-slide" role="group" aria-label="3 / 6">
                    <li>
                        <a href="user-messages.html"> Messages<span class="badge badge-brand">8</span>
                        </a>
                    </li>
                </div> -->
            </div><span class="swiper-notification" aria-live="assertive" aria-atomic="true"></span>
        </div>

    </ul>
</div>
<!-- CONTENT -->
<div class="mpl-box-md">
    <div class="container">
        <div class="row hgap-lg vgap-lg">
            <div class="col mpl-content mpl-isotope">

                <!-- INVENTORY -->
                <h2>Order History</h2>

                <!-- NG FOR -->


                <table
                    class="table mpl-table-responsive-sm cyberpress-table cyberpress-team-players table-hover mb-0 mpl-table-product"
                    style="width: max-content;">
                    <thead style="text-align-last: center;">
                        <tr>
                            <th><button type="button" class="btn btn-secondary dropdown-toggle"><span
                                        class="name">NO.</span></button></th>
                            <th><button type="button" class="btn btn-secondary dropdown-toggle"><span
                                        class="name">DATE</span></button></th>
                            <th><button type="button" class="btn btn-secondary dropdown-toggle"><span
                                        class="name">PRODUCTS</span></button></th>
                            <th><button type="button" class="btn btn-secondary dropdown-toggle"><span
                                        class="name">TOTAL €</span></button></th>
                            <th><button type="button" class="btn btn-secondary dropdown-toggle"><span
                                        class="name">ACTION</span></button></th>
                        </tr>
                    </thead>

                    <tbody *ngFor="let orderDetails of this.user.orderDetails let idx = index"
                        style="text-align-last: center;">
                        <!-- <ng-container *ngIf="getNumberOfListedKeys(product) > 0" ;> -->

                        <!-- <input [hidden]="true" formControlName="productId" type="number" value="{{this.product.id}}" id="product_id" class="form-control"> -->

                        <tr>
                            <td class="cyberpress-table-item-image cyberpress-table-item-small" style="width: auto;">
                                {{idx+1}}
                            </td>
                            <td class="cyberpress-table-item-game">
                                {{this.orderDetails.createdAt | date: 'MMM dd, yyyy'}}
                                <div class="cyberpress-player-team-dates">Time: {{this.orderDetails.createdAt | date: 'HH:mm a'}}
                                </div>
                            </td>
                            <td>
                                {{this.orderDetails.orderItems.length}}
                            </td>
                            <td>
                                {{this.orderDetails.total}} 
                            </td>
                            <td>
                                <div class="col-12">
                                    <a class="btn btn-block btn-primary"
                                        (click)="showOrderDetails(this.orderDetails.id)">VIEW ORDER</a>
                                </div>
                            </td>
                        </tr>
                        <!-- KEYS DISPLAY ROW -->
                        <ng-container *ngIf="this.selectedOrder == this.orderDetails.id && this.openOrderView">
                            <!-- <thead> -->
                            <tr>
                                <!-- <th></th>
                                <th></th>
                                <th></th> -->
                                <th>
                                    <button type="button" class="btn btn-secondary dropdown-toggle"><span
                                            class="name">NO.</span></button>
                                </th>
                                <th>
                                    <button type="button" class="btn btn-secondary dropdown-toggle"><span
                                            class="name">ICON</span></button>
                                </th>
                                <th><button type="button" class="btn btn-secondary dropdown-toggle"><span
                                            class="name">TITLE</span></button></th>
                                <th><button type="button" class="btn btn-secondary dropdown-toggle"><span
                                            class="name">QUANTITY</span></button></th>
                                <th><button type="button" class="btn btn-secondary dropdown-toggle"><span
                                            class="name">PRICE / KEY</span></button></th>

                            </tr>

                            <tr *ngFor="let orderItem of orderDetails.orderItems; let idx = index">
                                <td>
                                    {{idx+1}}
                                </td>

                                <td class="cyberpress-table-item-image cyberpress-table-item-small"
                                    style="width: auto;">
                                    <a routerLink="/product-view/{{this.orderItem?.product?.productDetails?.id}}">
                                        <img src="{{this.imagePath}}{{this.orderItem.product.productDetails.title}}.png" alt=""
                                            class="cyberpress-team-players-thumb" style="height: unset; width: 70px;">
                                    </a>
                                </td>

                                <td>
                                    {{this.orderItem.product.productDetails.title}}
                                </td>
                                <td>
                                    {{this.orderItem.quantity}}
                                </td>
                                <td>
                                    {{this.getDiscountedPrice(orderItem)}}
                                </td>

                            </tr>
                        </ng-container>
                        <!-- </ng-container> -->
                    </tbody>

                </table>


                <!-- NG FOR END -->
                <br>

                <!-- <div class="col-12">
                    <button class="btn btn-md" (click)="showNewKeyForm()">Add New Key</button>
                </div> -->

                <!-- <form action="">
                    <div class="col-12 col-md-6 col-lg-4" data-sr-item="product_title"
                        style="padding-right: 10px; width:30%; display: inline-block; visibility: visible; opacity: 1; transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transition: opacity 1s cubic-bezier(0.5, 0, 0, 1) 0s, transform 1s cubic-bezier(0.5, 0, 0, 1) 0s;">
                        <label for="product_title">Product Title:</label><input class="form-control" type="text"
                            id="product_title" name="product_title" placeholder="Product" list="products"><span
                            class="form-control-bg"></span>
                        <datalist id="products">
                            <option *ngFor="let productTitle of productDetails" value="{{productTitle.title}}"></option>
                        </datalist>
                    </div>
                    <div class="col-12 col-md-6 col-lg-4" data-sr-item="checkout"
                        style="padding-right: 10px; width:12%; display: inline-block; visibility: visible; opacity: 1; transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transition: opacity 1s cubic-bezier(0.5, 0, 0, 1) 0s, transform 1s cubic-bezier(0.5, 0, 0, 1) 0s;">
                        <label for="product_price">Price:</label><input class="form-control" type="text"
                            id="product_price" name="product_price" placeholder="€"><span
                            class="form-control-bg"></span>
                    </div>
                    <div class="col-12 col-md-6 col-lg-4" data-sr-item="checkout"
                        style="padding-right: 10px; width:30%; display: inline-block; visibility: visible; opacity: 1; transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transition: opacity 1s cubic-bezier(0.5, 0, 0, 1) 0s, transform 1s cubic-bezier(0.5, 0, 0, 1) 0s;">
                        <label for="activation_key">Key:</label><input class="form-control" type="text"
                            id="activation_key" name="activation_key" placeholder="Activation Code"><span
                            class="form-control-bg"></span>
                    </div>
                </form> -->

                <!-- NEW UP -->
            </div>
            <!-- <div class="col-auto mpl-sidebar" data-sr="widget" data-sr-duration="1200" data-sr-distance="20">
                <div class="mpl-widget mpl-widget-search">
                    <div data-sr-item="widget"
                        style="visibility: visible; opacity: 1; transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transition: opacity 1.2s cubic-bezier(0.5, 0, 0, 1) 0s, transform 1.2s cubic-bezier(0.5, 0, 0, 1) 0s;">
                        <form action="#">
                            <input type="text" class="form-control" name="s" placeholder="Enter a search term">
                            <div class="form-control-bg"></div>
                        </form>
                    </div>
                </div>

                <div class="mpl-widget mpl-widget-categories">
                    <h4 class="mpl-widget-title" data-sr-item="widget"
                        style="visibility: visible; opacity: 1; transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transition: opacity 1.2s cubic-bezier(0.5, 0, 0, 1) 0s, transform 1.2s cubic-bezier(0.5, 0, 0, 1) 0s;">
                        Categories</h4>
                    <ul class="list-unstyled" data-sr-item="widget"
                        style="visibility: visible; opacity: 1; transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transition: opacity 1.2s cubic-bezier(0.5, 0, 0, 1) 0s, transform 1.2s cubic-bezier(0.5, 0, 0, 1) 0s;">
                        <li><a href="#">All</a></li>
                        <li><a href="#">Audio</a></li>
                        <li><a href="#">Photo</a></li>
                        <li><a href="#">Video</a></li>
                        <li><a href="#">Controllers</a></li>
                    </ul>
                </div>
                <div class="mpl-widget mpl-widget-products">
                    <h4 class="mpl-widget-title" data-sr-item="widget"
                        style="visibility: visible; opacity: 1; transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transition: opacity 1.2s cubic-bezier(0.5, 0, 0, 1) 0s, transform 1.2s cubic-bezier(0.5, 0, 0, 1) 0s;">
                        Popular Products</h4>
                    <ul class="list-unstyled" data-sr-item="widget"
                        style="visibility: visible; opacity: 1; transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transition: opacity 1.2s cubic-bezier(0.5, 0, 0, 1) 0s, transform 1.2s cubic-bezier(0.5, 0, 0, 1) 0s;">
                        <li>
                            <a href="shop-product.html" class="mpl-product-widget mpl-product-item">
                                <span class="mpl-product-image">
                                    <span class="mpl-image">
                                        <img src="assets/images/dark/product-260x200.jpg" alt="">
                                    </span>
                                </span>
                                <span class="mpl-product-content">
                                    <span class="mpl-product-title text-truncate h5">Gamepad MPL</span>
                                    <span class="mpl-price"> €120.00 </span>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="shop-product.html" class="mpl-product-widget mpl-product-item">
                                <span class="mpl-product-image">
                                    <span class="mpl-image">
                                        <img src="assets/images/dark/product-2-260x200.jpg" alt="">
                                    </span>
                                </span>
                                <span class="mpl-product-content">
                                    <span class="mpl-product-title text-truncate h5">Headphones MPL</span>
                                    <span class="mpl-price"> €84.99 <span>€114.99</span>
                                    </span>
                                </span>
                            </a>
                        </li>
                        <li>
                            <a href="shop-product.html" class="mpl-product-widget mpl-product-item">
                                <span class="mpl-product-image">
                                    <span class="mpl-image">
                                        <img src="assets/images/dark/product-3-260x200.jpg" alt="">
                                    </span>
                                </span>
                                <span class="mpl-product-content">
                                    <span class="mpl-product-title text-truncate h5">Headphones MPS</span>
                                    <span class="mpl-price"> €74.99 </span>
                                </span>
                            </a>
                        </li>
                    </ul>
                </div>
                <div class="mpl-widget mpl-widget-instagram">
                    <h4 class="mpl-widget-title" data-sr-item="widget"
                        style="visibility: visible; opacity: 1; transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transition: opacity 1.2s cubic-bezier(0.5, 0, 0, 1) 0s, transform 1.2s cubic-bezier(0.5, 0, 0, 1) 0s;">
                        Instagram</h4>
                    <div class="mpl-instagram row hgap-xs vgap-xs" data-sr-item="widget" data-instagram-quality="md"
                        data-instagram-column-class="col-6 col-sm-4" data-instagram-count="6"
                        style="visibility: visible; opacity: 1; transform: matrix3d(1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1, 0, 0, 0, 0, 1); transition: opacity 1.2s cubic-bezier(0.5, 0, 0, 1) 0s, transform 1.2s cubic-bezier(0.5, 0, 0, 1) 0s;">
                        <div class="col-12">Failed to fetch data</div>
                    </div>
                </div>
            </div> -->
        </div>
    </div>
</div>